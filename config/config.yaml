# Main Configuration File for Trump Prediction MVP

# Data Collection
data_collection:
  poll_interval_minutes: 5
  trump_user_id: "107780257626128497"
  historical_data_path: "data/raw/historical"
  
# Timing Model Configuration
timing_model:
  type: "prophet"  # Options: prophet, survival, neural_tpp
  prophet:
    daily_seasonality: true
    weekly_seasonality: true
    yearly_seasonality: false
    changepoint_prior_scale: 0.05
    interval_width: 0.95
  
  # For future Neural TPP implementation
  neural_tpp:
    hidden_size: 64
    num_layers: 2
    learning_rate: 0.001
    epochs: 50

# Content Model Configuration
content_model:
  type: "claude_api"  # Options: claude_api, gpt2_finetuned, phi3_finetuned
  claude_api:
    model: "claude-sonnet-4-5-20250929"
    max_tokens: 280
    temperature: 0.8
    num_examples: 10  # Number of example posts in few-shot prompt
  
  # For future fine-tuned models
  finetuned:
    model_path: "models/finetuned"
    max_length: 280

# Feature Engineering
features:
  temporal:
    - hour
    - day_of_week
    - is_weekend
    - is_business_hours
    - time_since_last_post
  
  context:
    - recent_news
    - stock_market
    - trending_topics

# Evaluation Metrics
evaluation:
  timing_metrics:
    - mae
    - within_6h_accuracy
    - within_24h_accuracy
  
  content_metrics:
    - bertscore
    - bleu
    - perplexity

# Database
database:
  url: "sqlite:///./data/trump_predictions.db"
  pool_size: 5
  echo: false

# API Configuration
api:
  title: "Trump Post Prediction API"
  version: "0.1.0"
  description: "ML-powered prediction of Trump's next Truth Social post"
  host: "0.0.0.0"
  port: 8000

# Prediction Scheduling
scheduling:
  enabled: true  # Enable automatic predictions
  prediction_interval_hours: 6  # Make predictions every 6 hours
  # Alternative: cron expression (e.g., "0 */6 * * *" for every 6 hours)
  cron_expression: null  # If set, overrides prediction_interval_hours
  max_concurrent_predictions: 1  # Prevent overlapping jobs
  retry_on_failure: true
  retry_delay_minutes: 30

# Automated Model Retraining
retraining:
  enabled: true  # Enable automatic model retraining
  schedule_days: 7  # Retrain every N days (default: weekly)

  # Data split configuration
  test_split: 0.2  # Fraction of data for test set (0.2 = 20%)
  min_training_samples: 50  # Minimum samples required to train

  # Evaluation configuration
  evaluation_max_predictions: 20  # Max predictions to make during evaluation

  # Auto-promotion settings
  auto_promote: true  # Automatically promote better models
  min_improvement_threshold: 2.0  # Minimum % improvement to auto-promote (2% = 2.0)

  # Version management
  keep_versions: 10  # Keep N most recent versions per model type
  archive_old_versions: true  # Archive old versions to save space

  # Model-specific settings
  timing_model:
    enabled: true  # Enable timing model retraining
    evaluation_window_hours: 48  # Hours ahead to forecast during eval

  content_model:
    enabled: true  # Enable content model retraining
    update_examples: true  # Refresh example posts from latest data

# Prediction Validation
validation:
  enabled: true  # Enable automatic validation
  matching_window_hours: 24  # Time window for matching predictions to posts
  timing_threshold_hours: 6  # Within 6h = correct timing
  content_threshold: 0.3  # Minimum similarity for correct content

# Real-time Context Integration
context_integration:
  enabled: true  # Enable context fetching
  cache_ttl_minutes: 30  # Cache context for 30 minutes to avoid API limits
  save_to_database: true  # Save context snapshots to database

  # News API (NewsAPI.org)
  news_api_enabled: true
  news_max_articles: 10

  # Google Trends
  trends_enabled: true
  trends_num_topics: 10

  # Stock Market Data (yfinance)
  market_data_enabled: true

  # RSS Feeds (fallback for news)
  rss_feeds_enabled: true
  rss_feeds:
    - https://rss.nytimes.com/services/xml/rss/nyt/Politics.xml
    - https://feeds.washingtonpost.com/rss/politics
    - https://www.politico.com/rss/politicopicks.xml

  # Future: Social media trends
  twitter_trends_enabled: false  # Requires Twitter API (not implemented yet)

  # Future: Political events calendar
  events_calendar_enabled: false  # Not implemented yet

# Dashboard
dashboard:
  title: "Trump Post Predictor"
  refresh_interval_seconds: 60
  show_confidence_intervals: true
  max_historical_predictions: 100

# Logging
logging:
  level: "INFO"  # DEBUG, INFO, WARNING, ERROR
  format: "{time} | {level} | {message}"
  rotation: "500 MB"
  retention: "10 days"
